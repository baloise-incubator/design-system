import { Meta } from '@storybook/addon-docs'

<Meta
  title="Development/Contributing/Commands"
  parameters={{
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Commands

The commands of the Baloise Design System are managed in the `package.json` file in the section `scripts`.

| Command                              | Description                                                                                                 |
| :----------------------------------- | :---------------------------------------------------------------------------------------------------------- |
| npm **install**                      | Installs all the npm dependencies and bootstrap the lerna project with the symlinks and builds the library. |
| npm run **build**                    | Builds all packages in the correct order.                                                                   |
| npm run **test**                     | Runs the components tests.                                                                                  |
| npm run **test:e2e**                 | Runs cypress e2e tests.                                                                                     |
| npm run **start** or npm run **dev** | Starts storybook with custom elements and watches for changes. Like in production.                          |
| npm run **debug**                    | Starts storybook with stencil builds and watches for changes. Enables debugging.                            |
| npm run **lint**                     | Lints the source files with eslint                                                                          |
| npm run **format**                   | Formats the source file with prettier                                                                       |

## Build

The build script is divided into 3 phases:

- **Pre Build**
  - Build resources like icons and fonts for the design system
- **Core Build**
  - Builds components and the global stylesheet
  - Depends on icons and fonts
- **Post Build**
  - Builds proxy libraries, extensions and the testing library
  - Depends on components and the global stylesheet

import BuildImage from '../../assets/images/architecture/build.svg'

<img src={BuildImage} />

## Debug Components

Set a `debugger` keyword in the components code and run it with `npm run dev`

## Testing

All the library project commands starts with the prefix `testing:`

| Command                     | Description                                                             |
| :-------------------------- | :---------------------------------------------------------------------- |
| npm run **test:e2e**        | Runs the cypress components tests.                                      |
| npm run **test:components** | Runs the components tests.                                              |
| npm run **test:ci**         | Builds and starts the test server and runs the cypress test against it. |

## Documentation (Storybook)

All the library project commands starts with the prefix `storybook:`

| Command                     | Description                                         |
| :-------------------------- | :-------------------------------------------------- |
| npm run **storybook**       | Installs all the dependencies of the documentation. |
| npm run **storybook:start** | Runs the static generated storybook.                |

<bal-doc-github link="/stories/development/contributing/04-commands.stories.mdx"></bal-doc-github>
