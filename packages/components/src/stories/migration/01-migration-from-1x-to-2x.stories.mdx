import { Meta } from '@storybook/addon-docs'

<Meta
  title="Migration/Migration from 1.x to 2.x"
  parameters={{
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Migration from 1.x to 2.x

The following workflow walks you through the migration steps.
Note that the actual steps required for your project may vary, and these steps should be treated as general guidance rather than strict instructions.

## Preparations

Did you use utility functions like?

- `utils`
- `filters/pipes`
- `validations`

If **No** you can easily migrate to the new version, but if **Yes** go to the installation guide.

Those utility functions have been moved to [baloise/web-app-utils repo](https://github.com/baloise/web-app-utils).
This was done to have all utility functions in one place and to reduce the complexity of the Design System.

## Installation

First you need to install the missing util packages. Therefore, follow the installation guide of the [baloise/web-app-utils documentation](https://github.com/baloise/web-app-utils).

After the installation update the Design System to version 2.x and replace the import statements, which still use utility functions from the package `@baloise/design-system-next-components`.

### Example Utils

```typescript
// - old
import { year, month, isoString } from '@baloise/design-system-next-components'

// + new
import { year, month, isoString } from '@baloise/web-app-utils'


const selectorDayBox = (date: Date) => `[data-date="${isoString(date)}"]`
...
```

### Example Validators

```typescript
import { Component } from '@angular/core'
import { FormControl, FormGroup } from '@angular/forms'

// - old
import { BalValidators } from '@baloise/design-system-next-components-angular'

// + new
import { BalValidators } from '@baloise/web-app-validators-angular'

@Component({
  selector: 'app-form-page',
  templateUrl: './form-page.component.html',
})
export class FormPageComponent {
  form = new FormGroup({
    email: new FormControl(null, [BalValidators.isRequired(), BalValidators.isMinLength(4), BalValidators.isEmail()]),
  })
}
...
```

<bal-doc-github link="/stories/migration/01-migration-from-1x-to-2x.stories.mdx"></bal-doc-github>
