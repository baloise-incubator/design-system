import{r as t,c as s,h as i,H as e,g as h}from"./p-a880f6ce.js";import{l as a}from"./p-a66809ee.js";import{u as n,b as r,d as o}from"./p-e203f600.js";import{i as l,N as c,A as u}from"./p-0f4ee1a9.js";import{e as p,f as b,s as d,k as m,i as f,h as j,a as g,b as v,j as y,c as k,d as C,g as w,l as F}from"./p-27ef59b5.js";import{b as $,h as N}from"./p-77b56332.js";import{i as x}from"./p-9a929c20.js";import{q as B,o as I,s as K}from"./p-8f313b4b.js";import{a as O,d as P}from"./p-92b19871.js";import{B as q}from"./p-61996a75.js";import"./p-2e55b95c.js";import"./p-3e8ff66b.js";import"./p-f382ef7c.js";var A=Object.prototype.toString;const D=()=>{const t=n();return t&&t.locale||O},H=()=>B(D()),L=(t,s=0)=>{t.charAt(0)===H()&&(t=`0${t}`);const i=0===s?parseInt(t,10):parseFloat(t);return function(t){return function(t){return"number"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Number]"==A.call(t)}(t)&&t!=+t}(i)?"":(e=i,h=s,I(D(),e,h));var e,h},V=class{constructor(i){t(this,i),this.balInput=s(this,"balInput",7),this.balChange=s(this,"balChange",7),this.balBlur=s(this,"balBlur",7),this.balFocus=s(this,"balFocus",7),this.balKeyPress=s(this,"balKeyPress",7),this.balClick=s(this,"balClick",7),this.inputId="bal-number-input-"+_++,this.inheritedAttributes={},this.inputValue=this.value,this.initialValue=0,this.onInput=t=>{const s=w(t);if(s){const t=parseFloat(parseFloat((i=s.value,i.replace(H(),"."))).toFixed(this.decimal));isNaN(t)?this.decimal||"-"===s.value||s.value===H()||(this.inputValue=void 0,s.value=""):this.inputValue=t}var i;this.balInput.emit(this.inputValue)},this.onBlur=t=>{p(this,t);const s=w(t);!s||s.value!==H()&&"-"!==s.value||(this.inputValue=void 0,s.value=""),this.exactNumber&&s&&(void 0===s.value||""===s.value||null===s.value)&&(this.inputValue=0,s.value="0"),b(this)},this.onKeydown=t=>{if(!a(t)&&!l(t)){if(!this.getAllowedKeys().includes(t.key))return d(t);const s=F(this);if(t.key===H()&&(!this.decimal||s.includes(H())))return d(t);if("-"===t.key&&0!==s.length)return d(t);if([...c,H(),"-"].indexOf(t.key)>=0){const s=m(this,t),i=s.includes(H())?null==s?void 0:s.split(H())[1]:"";if(i&&i.length>this.decimal)return d(t)}}},this.onFocus=t=>f(this,t),this.onClick=t=>j(this,t),this.handleClick=t=>g(this,t),this.hasFocus=!1,this.language=P.language,this.region=P.region,this.name=this.inputId,this.invalid=!1,this.decimal=0,this.suffix=void 0,this.placeholder=void 0,this.required=!1,this.disabled=!1,this.readonly=!1,this.exactNumber=!1,this.debounce=0,this.value=void 0}debounceChanged(){this.balChange=$(this.balChange,this.debounce)}listenOnClick(t){v(this,t)}resetHandler(t){const s=t.target;(null==s?void 0:s.contains(this.el))&&y(this,this.initialValue,this.resetHandlerTimer)}connectedCallback(){this.debounceChanged(),r(this),this.initialValue=this.value||0}componentDidLoad(){this.inputValue=this.value}componentWillLoad(){this.inheritedAttributes=x(this.el,["aria-label","tabindex","title"])}disconnectedCallback(){o(this)}configChanged(t){this.language=t.language,this.region=t.region,!this.hasFocus&&this.nativeInput&&(this.nativeInput.value=this.getFormattedValue())}async setFocus(){k(this)}async setBlur(){C(this)}getInputElement(){return Promise.resolve(this.nativeInput)}getAllowedKeys(){return[...c,...u,H(),"-"]}getRawValue(){return"number"!=typeof this.value||isNaN(this.value)?(this.value||"").toString():this.value.toString()}getFormattedValue(){const t=this.getRawValue(),s=void 0!==this.suffix&&void 0!==t&&""!==t?" "+this.suffix:"";return`${L(t,this.decimal)}${s}`}get pattern(){let t=this.suffix;return""!==t&&(t=` ${t}`),`[-0-9${K(D())}${this.decimal>0?H():""}${t}]*`}render(){const t=this.hasFocus?(()=>this.getRawValue().replace(".",H()))():this.getFormattedValue(),s=this.inputId+"-lbl",h=N(this.el);h&&(h.id=s,h.htmlFor=this.inputId);const a=q.block("number-input");return i(e,{onClick:this.handleClick,"aria-disabled":this.disabled?"true":null,class:Object.assign({},a.class())},i("input",Object.assign({class:{input:!0,"is-disabled":this.disabled||this.readonly,"is-danger":this.invalid},ref:t=>this.nativeInput=t,id:this.inputId,"aria-labelledby":h?s:null,name:this.name,disabled:this.disabled,placeholder:this.placeholder||"",readonly:this.readonly,required:this.required,pattern:this.pattern,value:t,onInput:t=>this.onInput(t),onFocus:t=>this.onFocus(t),onBlur:t=>this.onBlur(t),onClick:this.onClick,onKeyDown:t=>this.onKeydown(t),onKeyPress:t=>this.balKeyPress.emit(t)},this.inheritedAttributes)))}get el(){return h(this)}static get watchers(){return{debounce:["debounceChanged"]}}};let _=0;V.style={css:".bal-number-input{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;position:relative;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;width:100%;padding:0;font-family:var(--bal-family-primary)}"};export{V as bal_number_input}